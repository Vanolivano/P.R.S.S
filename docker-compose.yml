version: '3.4'

services:
  prss.rmqpublisher.infra.http.daemon:
    image: prssrmqpublisherinfrahttpdaemon:dev
    container_name: PRSS.RmqPublisher.Infra.Http.Daemon
    build:
      context: ./src/RmqPublisher/Publication.Rabbit.Subscription.Storage.RmqPublisher.Infra.Http.Daemon
      dockerfile: Dockerfile
    ports:
      - "5047:5047"
    environment:
      ASPNETCORE_ENVIRONMENT: "Development"
      ASPNETCORE_URLS: "http://+:5047"
      RABBIT_MQ_CONNECTION_STRING: "amqp://guest:guest@host.docker.internal:5672"
      AUTH_TOKEN: "784aae1c1abb4aa3914f42a81e893ed2"
    restart: always
    
    
  prss.rmqsubscriber.infra.dtt.daemon:
    image: prssrmqsubscriberinfradttdaemon:dev
    container_name: PRSS.RmqSubscriber.Infra.Dtt.Daemon
    build:
      context: ./src/RmqSubscriber/Publication.Rabbit.Subscription.Storage.RmqSubscriber.Infra.Dtt.Daemon
      dockerfile: Dockerfile
    ports:
      - "5048:5048"
    environment:
      ASPNETCORE_ENVIRONMENT: "Development"
      ASPNETCORE_URLS: "http://+:5048"
      RABBIT_MQ_CONNECTION_STRING: "amqp://guest:guest@host.docker.internal:5672"
    restart: always